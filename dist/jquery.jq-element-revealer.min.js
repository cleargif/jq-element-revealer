/*! jq-element-revealer - v0.1.0 - 2014-11-04
* https://github.com/cleargif/jq-element-revealer
* Copyright (c) 2014 @ClearGif; Licensed http://cleargifltd.mit-license.org/ */
!function(a){"use strict";function b(b,e){this.element=b,this.$element=a(b),this.settings=a.extend({},d,e),this._defaults=d,this._name=c,this.init()}var c="jqReveal",d={debug:!0,arraySeperator:"|",dpPublishDelegateSelector:".pd-delegate-hook",dpPublisherSelector:".pd-publisher",dpPublisherEvents:"data-pd-publish-events",dpPublisherEventValue:"data-pd-publish-value",dpSubscriberSelector:".pd-subscriber",dpSubscriberEvents:"data-pd-subscribe-events",dpSubscriberEventValues:"data-pd-subscribe-values"};a.extend(b.prototype,{init:function(){this.bindPublishers(),this.bindSubscribers(),this.settings.debug&&this.debug()},debug:function(){var b=a(this.settings.dpSubscriberSelector);b.css({border:"1px solid gray"}),b.is(function(b,c){a(c).prepend("<b>"+a(c).attr("data-pd-subscribe-events")+"::"+a(c).attr("data-pd-subscribe-values")+"</b>")})},bindPublishers:function(){var b=a(this.settings.dpPublishDelegateSelector),c=this;b.on("click pseudo-click",c.settings.dpPublisherSelector,{},function(b){var d=a(this),e=c.extractEventNamesList(d,this);("A"===d.prop("tagName")||"BUTTON"===d.prop("tagName"))&&b.preventDefault(),a.each(e,function(a,d){c.pdPublish(d,b)})})},pdPublish:function(b,c){var d=a(c.target)[0],e=d.getAttribute("value")||d.getAttribute(this.settings.dpPublisherEventValue);a.publish(b,{e:c,eventValue:e})},bindSubscribers:function(){var b=a(this.settings.dpSubscriberSelector),c=this;b.is(function(b,d){a.subscribe(d.getAttribute(c.settings.dpSubscriberEvents),function(a,b){c.subscriberStateManager(d,a,b)})})},subscriberStateManager:function(b,c,d){var e,f=b.getAttribute(this.settings.dpSubscriberEventValues),g=a(b);return f?(e=!!~a.inArray(d.eventValue,f.split(this.settings.arraySeperator)))?void g.show():void g.hide():void g.toggle()},extractEventNamesList:function(b,c){var d=["DEFAULT"],e=b.prop("tagName"),f="SELECT"===e?a("option:selected",c)[0]:b[0];return d=f.getAttribute(this.settings.dpPublisherEvents).split(this.settings.arraySeperator)}}),a.fn[c]=function(d){return this.each(function(){a.data(this,"plugin_"+c)||a.data(this,"plugin_"+c,new b(this,d))}),this}}(jQuery,window,document);