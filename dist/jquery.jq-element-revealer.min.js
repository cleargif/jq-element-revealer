/*! jq-element-revealer - v0.1.0 - 2014-11-04
* https://github.com/cleargif/jq-element-revealer
* Copyright (c) 2014 @ClearGif; Licensed http://cleargifltd.mit-license.org/ */
!function(a){"use strict";function b(b){this.settings=a.extend({},d,b),this.init()}var c="jqReveal",d={debug:!1,arraySeparator:"|",publishDelegateSelector:".pd-delegate-hook",publisherSelector:".pd-publisher",publisherEvents:"data-pd-publish-events",publisherEventValue:"data-pd-publish-value",subscriberSelector:".pd-subscriber",subscriberEvents:"data-pd-subscribe-events",subscriberEventValues:"data-pd-subscribe-values"},e=!1;a.extend(b.prototype,{init:function(){this.bindPublishers(),this.bindSubscribers(),this.settings.debug&&this.debug()},debug:function(){var b=a(this.settings.subscriberSelector);b.css({border:"1px solid gray"}),b.is(function(b,c){a(c).prepend("<b>"+a(c).attr("data-pd-subscribe-events")+"::"+a(c).attr("data-pd-subscribe-values")+"</b>")})},bindPublishers:function(){var b=a(this.settings.publishDelegateSelector),c=this;b.on("click pseudo-click",c.settings.publisherSelector,{},function(b){var d=a(this),e=c.extractEventNamesList(d,this),f=d.prop("tagName");("A"===f||"BUTTON"===f)&&b.preventDefault(),a.each(e,function(a,d){c.pdPublish(d,b)})})},pdPublish:function(b,c){var d=a(c.target)[0],e=d.getAttribute("value")||d.getAttribute(this.settings.publisherEventValue);a.publish(b,{e:c,eventValue:e})},bindSubscribers:function(){var b=a(this.settings.subscriberSelector),c=this;b.is(function(b,d){a.subscribe(d.getAttribute(c.settings.subscriberEvents),function(a,b){c.subscriberStateManager(d,a,b)})})},subscriberStateManager:function(b,c,d){var e,f=b.getAttribute(this.settings.subscriberEventValues),g=a(b);return f?(e=!!~a.inArray(d.eventValue,f.split(this.settings.arraySeparator)))?void g.show():void g.hide():void g.toggle()},extractEventNamesList:function(b,c){var d=["DEFAULT"],e=b.prop("tagName"),f="SELECT"===e?a("option:selected",c)[0]:b[0];return d=f.getAttribute(this.settings.publisherEvents).split(this.settings.arraySeparator)}}),a[c]=function(a){var c;return e||(c=new b(a)),this}}(jQuery,window,document);